<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>🧩 美加素食詞彙配對遊戲</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../css/assetsstyles.css">
  <style>
    body {
      font-family: 'Noto Sans TC', serif;
      padding: 2em;
      background-color: #fcf9f5;
    }
    h2 {
      text-align: center;
      color: #5a3825;
    }
    .game-container {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 2em;
      margin-top: 2em;
    }
    .column {
      width: 40%;
      min-width: 250px;
    }
    .drop-zone, .drag-item {
      padding: 0.75em 1em;
      margin: 0.5em 0;
      background: #f8f0ff;
      border: 2px dashed #a88ac2;
      cursor: pointer;
      text-align: center;
      border-radius: 8px;
    }
    .drop-zone.over {
      border-color: #0099ff;
      background-color: #e0f7ff;
    }
    .correct {
      background-color: #c8f7c5;
      border-color: green;
    }
  </style>
</head>
<body>

<h2>🧩 美加素食詞彙配對遊戲</h2>
<p style="text-align: center;">拖曳英文單字對應中文意思</p>

<div class="game-container">
  <div class="column" id="left-col"></div>
  <div class="column" id="right-col"></div>
</div>

<script>
  async function initGame() {
    const res = await fetch("../data/vegetarian-us-ca.json");
    const data = await res.json();
    const left = document.getElementById("left-col");
    const right = document.getElementById("right-col");

    // 清空
    left.innerHTML = "";
    right.innerHTML = "";

    const shuffled = [...data].sort(() => Math.random() - 0.5);

    shuffled.forEach(item => {
      const drag = document.createElement("div");
      drag.className = "drag-item";
      drag.textContent = item.en;
      drag.setAttribute("draggable", "true");
      drag.id = item.en;
      drag.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", item.en);
      });
      left.appendChild(drag);

      const drop = document.createElement("div");
      drop.className = "drop-zone";
      drop.dataset.match = item.en;
      drop.textContent = item.zh;

      drop.addEventListener("dragover", e => {
        e.preventDefault();
        drop.classList.add("over");
      });
      drop.addEventListener("dragleave", () => drop.classList.remove("over"));
      drop.addEventListener("drop", e => {
        e.preventDefault();
        const dragged = e.dataTransfer.getData("text/plain");
        if (dragged === drop.dataset.match) {
          drop.innerHTML = `${drop.textContent} ✅`;
          drop.classList.add("correct");
          const el = document.getElementById(dragged);
          el.setAttribute("draggable", false);
          drop.appendChild(el);
        } else {
          alert("不對喔～再試一次！");
        }
        drop.classList.remove("over");
      });

      right.appendChild(drop);
    });
  }

  initGame();
</script>

</body>
</html>
